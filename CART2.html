<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Cart üõí | D‚ôüÔ∏èM GamesShop</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: #f5f6fa;
    margin: 0;
    padding: 0;
  }

  header {
    background: linear-gradient(135deg, #1b1b2f, #162447);
    color: white;
    text-align: center;
    padding: 1.2rem 0;
    box-shadow: 0 4px 10px rgba(80, 52, 34, 0.3);
  }

  h2 {
    font-size: 1.8rem;
    letter-spacing: 1px;
  }

  main {
    max-width: 900px;
    margin: 2rem auto;
    background: white;
    border-radius: 15px;
    padding: 2rem;
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  }

  table {
    width: 100%;
    border-collapse: collapse;
  }

  th {
    text-align: left;
    padding: 0.75rem;
    color: white;
    background: #1b1b2f;
    letter-spacing: 1px;
  }

  td {
    padding: 0.75rem;
    border-bottom: 1px solid #ddd;
  }

  tr:hover {
    background: #f1f1f1;
    transition: 0.3s ease;
  }

  .qty-btn {
    padding: 6px 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background: #162447;
    color: white;
    transition: 0.3s ease;
  }

  .qty-btn:hover {
    background: #1f4068;
  }

  .remove-btn {
    background: #e94560;
  }

  .remove-btn:hover {
    background: #ff5964;
  }

  .clear-cart {
    display: inline-block;
    background: #e94560;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    margin-top: 15px;
    transition: 0.3s ease;
  }

  .clear-cart:hover {
    background: #ff4f5a;
  }

  .checkout {
    display: inline-block;
    background: #21bf73;
    color: white;
    border: none;
    padding: 10px 18px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    margin-left: 10px;
    margin-top: 15px;
    transition: 0.3s ease;
  }

  .checkout:hover {
    background: #23d189;
  }

  .total {
    text-align: right;
    font-size: 1.2rem;
    font-weight: 600;
    margin-top: 1rem;
  }

  footer {
    text-align: center;
    padding: 1.2rem;
    background: #1b1b2f;
    color: white;
    margin-top: 3rem;
    font-size: 0.9rem;
    letter-spacing: 1px;
  }

  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }

</style>
</head>
<body>
  <header>
    <h2>üõçÔ∏è Your D‚ôüÔ∏èM GamesShop Cart</h2>
  </header>

  <main>
    <table id="cart-table">
      <thead>
        <tr>
          <th>Game</th>
          <th>Price (KSH)</th>
          <th>Quantity</th>
          <th>Total</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <p id="grand-total" class="total">Total: KSH 0</p>

    <div style="text-align:right;">
      <button class="clear-cart" onclick="clearCart()"> Clear Cart</button>
      <button class="checkout" onclick="checkout()"> Checkout via WhatsApp</button>
    </div>
  </main>

  <footer>
    ¬© 2025 D‚ôüÔ∏èM GamesShop | Built for Fun, Strategy, and Smiles üé≤
  </footer>

  <script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  function renderCart() {
    const tbody = document.querySelector("#cart-table tbody");
    tbody.innerHTML = "";
    let grandTotal = 0;

    if (cart.length === 0) {
      tbody.innerHTML = `<tr><td colspan="5" style="text-align:center; padding:1rem;">Your cart is empty </td></tr>`;
    } else {
      cart.forEach((item, index) => {
        const total = item.price * item.quantity;
        grandTotal += total;

        tbody.innerHTML += `
          <tr class="fade-in">
            <td>${item.name}</td>
            <td>${item.price}</td>
            <td>
              <button class="qty-btn" onclick="changeQty(${index}, -1)">-</button>
              ${item.quantity}
              <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
            </td>
            <td>${total}</td>
            <td><button class="qty-btn remove-btn" onclick="removeItem(${index})">Remove</button></td>
          </tr>
        `;
      });
    }

    document.getElementById("grand-total").textContent = `Total: KSH ${Math.round(grandTotal)}`;
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  function changeQty(index, delta) {
    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) cart.splice(index, 1);
    renderCart();
  }

  function removeItem(index) {
    cart.splice(index, 1);
    renderCart();
  }

  function clearCart() {
    if (confirm("Are you sure you want to clear your cart?")) {
      cart = [];
      renderCart();
    }
  }  

  function checkout() {
    if (cart.length === 0) {
      alert("Your cart is empty ü´ô");
      return;
    }
    const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
    const message = encodeURIComponent(
      "Hello! Here‚Äôs my order from D‚ôüÔ∏èM GamesShop:\n\n" +
      cart.map(i => `${i.name} x${i.quantity} - KSH ${i.price * i.quantity}`).join("\n") +
      `\n\nTotal: KSH ${total}`
    );
    window.location.href = `https://wa.me/254797577567?text=${message}`;
  }

  renderCart();
  </script>
</body>
</html>
